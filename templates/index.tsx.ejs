import * as React from "react";
import * as ReactDOM from "react-dom";
import { HashRouter as Router, Switch, Route, Link } from "react-router-dom";
import Menu from "antd/es/Menu";
import Layout from "antd/es/layout";
import { Header, LayoutPanel, Logo } from "@components/styled";
import Loading from "@components/loading";
import image from "@static/logo";
import "highlight.js/styles/github.css";
import "@scss/global.scss";
import "@scss/loading.scss";
import "antd/dist/antd.css";

const { Content } = Layout;

const TagList = React.lazy(() => import("@components/TagList"));
const List = React.lazy(() => import("@components/List"));

const Suspence = React.Suspense;

function App() {
  return (
    <Router>
      <LayoutPanel>
        <Header>
          <Logo image={image} />
          <Menu mode="horizontal" defaultSelectedKeys={["homepage"]}>
            <Menu.Item key="homepage">
              <Link to="/">首页</Link>
            </Menu.Item>
            <Menu.Item key="tags">
              <Link to="/tags">TAGS</Link>
            </Menu.Item>
          </Menu>
        </Header>
        <Content style={{ display: "flex", margin: "0 auto" }}>
          <Suspence fallback={<Loading />}>
            <Switch>
              <Route path="/tags" component={TagList} />
              <Route path="/" component={List} />
            </Switch>
          </Suspence>
        </Content>
      </LayoutPanel>
    </Router>
  );
}

ReactDOM.render(<App />, document.getElementById("app"));
