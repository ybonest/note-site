(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{330:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./scss/comments.scss?")},421:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules\nvar react_router = __webpack_require__(28);\n\n// EXTERNAL MODULE: ./components/Tags.tsx\nvar Tags = __webpack_require__(260);\n\n// EXTERNAL MODULE: ./components/Introduction.tsx\nvar Introduction = __webpack_require__(261);\n\n// EXTERNAL MODULE: ./components/styled.tsx\nvar styled = __webpack_require__(55);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(54);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tree/index.js + 4 modules\nvar tree = __webpack_require__(248);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/icons/CarryOutOutlined.js + 5 modules\nvar CarryOutOutlined = __webpack_require__(420);\n\n// EXTERNAL MODULE: ./app/context.tsx\nvar context = __webpack_require__(252);\n\n// CONCATENATED MODULE: ./components/Tree.tsx\nvar _jsxFileName = "D:\\\\Workspace\\\\note-site\\\\components\\\\Tree.tsx";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral(["\\n  width: 260px;\\n  border-right: 1px solid #e6e4e4;\\n  display: block;\\n  position: ", ";\\n  top: 0px;\\n  height: 100vh;\\n  margin-left: -260px;\\n  padding: 10px !important;\\n  @media (max-width: 1000px) {\\n    display: none;\\n  }\\n"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\n\n\n\n\n\n\nvar TreeAliasName = Object(styled_components_browser_esm["a" /* default */])(tree["a" /* default */])(_templateObject(), function (_ref) {\n  var fixStatus = _ref.fixStatus;\n  return fixStatus ? \'fixed\' : \'relative\';\n});\n\nfunction createTitle(_ref2) {\n  var title = _ref2.title,\n      namehash = _ref2.namehash;\n  return /*#__PURE__*/react["createElement"](react_router_dom["b" /* Link */], {\n    style: {\n      display: \'block\',\n      width: \'100%\',\n      height: \'100%\'\n    },\n    to: \'/\' + namehash,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 10\n    }\n  }, title);\n}\n\nfunction buildTreeData(list, tag) {\n  var rootTree = {\n    title: tag,\n    key: tag,\n    icon: /*#__PURE__*/react["createElement"](CarryOutOutlined["a" /* default */], {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 51\n      }\n    }),\n    children: []\n  };\n  var grops = {};\n\n  var _iterator = _createForOfIteratorHelper(list),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n\n      if (item.group) {\n        if (grops[item.group]) {\n          grops[item.group].push({\n            title: createTitle(item),\n            key: item.namehash\n          });\n        } else {\n          grops[item.group] = [{\n            title: createTitle(item),\n            key: item.title\n          }];\n          rootTree.children.push({\n            title: item.group,\n            key: item.group,\n            children: grops[item.group]\n          });\n        }\n      } else {\n        rootTree.children.push({\n          title: createTitle(item),\n          key: item.namehash\n        });\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return [rootTree];\n}\n\nfunction Tree(props) {\n  var _this = this;\n\n  var tag = props.tag,\n      selectKey = props.selectKey;\n  var expandedKeys = [selectKey.slice(1)];\n\n  var _React$useState = react["useState"](false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      fixStatus = _React$useState2[0],\n      setTreeFix = _React$useState2[1];\n\n  react["useEffect"](function () {\n    function handleScroll(e) {\n      setTreeFix(e.target.documentElement.scrollTop > 84);\n    }\n\n    window.addEventListener(\'scroll\', handleScroll);\n    return function () {\n      window.removeEventListener(\'scroll\', handleScroll);\n    };\n  });\n  return /*#__PURE__*/react["createElement"](context["a" /* MarkedContext */].Consumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, function (_ref3) {\n    var categoryByTag = _ref3.categoryByTag;\n    var treeData = buildTreeData(categoryByTag[tag], tag);\n    return /*#__PURE__*/react["createElement"](TreeAliasName, {\n      showLine: true,\n      fixStatus: fixStatus,\n      selectedKeys: expandedKeys,\n      blockNode: true,\n      defaultExpandAll: true,\n      treeData: treeData,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    });\n  });\n}\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(313);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/comment/index.js\nvar comment = __webpack_require__(244);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/avatar/index.js\nvar es_avatar = __webpack_require__(243);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 7 modules\nvar es_form = __webpack_require__(246);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/input/index.js + 8 modules\nvar input = __webpack_require__(245);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js + 5 modules\nvar es_button = __webpack_require__(97);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/list/index.js + 7 modules\nvar es_list = __webpack_require__(247);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js\nvar spin = __webpack_require__(130);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/tabs/index.js + 2 modules\nvar tabs = __webpack_require__(98);\n\n// EXTERNAL MODULE: ./scss/comments.scss\nvar scss_comments = __webpack_require__(330);\n\n// CONCATENATED MODULE: ./comments/Comments.tsx\nvar Comments_this = undefined,\n    Comments_jsxFileName = "D:\\\\Workspace\\\\note-site\\\\comments\\\\Comments.tsx";\n\nfunction _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar TextArea = input["a" /* default */].TextArea;\nvar TabPane = tabs["a" /* default */].TabPane;\nvar proxy = \'https://cors-anywhere.herokuapp.com/\';\nvar Comments_headers = {\n  Accept: \'application/vnd.github.v3.full+json\'\n}; // \'application/vnd.github.machine-man-preview\' };\n\nvar baseUrlMap = {\n  OAuth: "".concat(proxy, "https://github.com"),\n  api: "https://api.github.com"\n};\n\nfunction ajax() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var headers = {};\n  var token = localStorage.getItem(\'access_token\');\n  if (token) headers.Authorization = "token ".concat(token);\n  var instance = axios_default.a.create({\n    baseURL: baseUrlMap[props.type] || baseUrlMap.api,\n    timeout: props.timeout || 6000,\n    headers: _objectSpread({\n      Accept: \'application/json\'\n    }, headers)\n  });\n  instance.interceptors.response.use(function (response) {\n    if (response.status === 200 || response.status === 201) {\n      return response.data;\n    }\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return instance;\n}\n\nvar api = ajax();\nvar oAuth = ajax({\n  type: \'OAuth\'\n}); // 获取access_token\n\nfunction LoginWithCode(_x) {\n  return _LoginWithCode.apply(this, arguments);\n} // 获取user信息\n\n\nfunction _LoginWithCode() {\n  _LoginWithCode = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(params) {\n    return regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return oAuth({\n              method: \'post\',\n              url: \'login/oauth/access_token\',\n              data: params\n            });\n\n          case 2:\n            return _context6.abrupt("return", _context6.sent);\n\n          case 3:\n          case "end":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _LoginWithCode.apply(this, arguments);\n}\n\nfunction Comments_user(_x2) {\n  return _user.apply(this, arguments);\n}\n\nfunction _user() {\n  _user = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(token) {\n    return regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return api.get(\'/user\', {\n              headers: {\n                Authorization: "token ".concat(token)\n              }\n            });\n\n          case 2:\n            return _context7.abrupt("return", _context7.sent);\n\n          case 3:\n          case "end":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _user.apply(this, arguments);\n}\n\n// 获取issues\nfunction getIssues(_x3, _x4, _x5, _x6) {\n  return _getIssues.apply(this, arguments);\n}\n\nfunction _getIssues() {\n  _getIssues = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(owner, repo, params, auth) {\n    return regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return api.get("/repos/".concat(owner, "/").concat(repo, "/issues"), {\n              params: params,\n              auth: auth\n            });\n\n          case 2:\n            return _context8.abrupt("return", _context8.sent);\n\n          case 3:\n          case "end":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _getIssues.apply(this, arguments);\n}\n\nfunction createIssues(_x7, _x8, _x9, _x10) {\n  return _createIssues.apply(this, arguments);\n}\n\nfunction _createIssues() {\n  _createIssues = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(owner, repo, data, headers) {\n    return regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return api.post("/repos/".concat(owner, "/").concat(repo, "/issues"), data, {\n              headers: headers\n            });\n\n          case 2:\n            return _context9.abrupt("return", _context9.sent);\n\n          case 3:\n          case "end":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _createIssues.apply(this, arguments);\n}\n\nfunction getIssuesByNumbr(_x11, _x12, _x13) {\n  return _getIssuesByNumbr.apply(this, arguments);\n}\n\nfunction _getIssuesByNumbr() {\n  _getIssuesByNumbr = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(owner, repo, issue_number) {\n    return regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.next = 2;\n            return api.get("/repos/".concat(owner, "/").concat(repo, "/issues/").concat(issue_number));\n\n          case 2:\n            return _context10.abrupt("return", _context10.sent);\n\n          case 3:\n          case "end":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _getIssuesByNumbr.apply(this, arguments);\n}\n\nfunction stringifyQuery(search, baseURL) {\n  return Object.keys(search).reduce(function (base, key, index) {\n    if (index === 0) {\n      return "".concat(base, "?").concat(key, "=").concat(search[key]);\n    }\n\n    return "".concat(base, "&").concat(key, "=").concat(search[key]);\n  }, baseURL || \'\');\n}\n\nvar Comments_Editor = function Editor(_ref) {\n  var onChange = _ref.onChange,\n      value = _ref.value,\n      disabled = _ref.disabled;\n  return /*#__PURE__*/react["createElement"]("div", {\n    __self: Comments_this,\n    __source: {\n      fileName: Comments_jsxFileName,\n      lineNumber: 125,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/react["createElement"](es_form["a" /* default */].Item, {\n    style: {\n      width: \'100%\'\n    },\n    __self: Comments_this,\n    __source: {\n      fileName: Comments_jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/react["createElement"](TextArea, {\n    rows: 4,\n    disabled: disabled,\n    onChange: onChange,\n    value: value,\n    __self: Comments_this,\n    __source: {\n      fileName: Comments_jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  })));\n};\n\nvar Comments_avatar = function avatar(url) {\n  return /*#__PURE__*/react["createElement"](es_avatar["a" /* default */], {\n    src: url,\n    __self: Comments_this,\n    __source: {\n      fileName: Comments_jsxFileName,\n      lineNumber: 133,\n      columnNumber: 10\n    }\n  });\n};\n\nvar Comments_CommentsList = function CommentsList(props) {\n  if (Array.isArray(props.comments)) {\n    return /*#__PURE__*/react["createElement"](es_list["a" /* default */], {\n      className: "comment-list",\n      itemLayout: "horizontal",\n      dataSource: props.comments,\n      renderItem: function renderItem(item) {\n        return /*#__PURE__*/react["createElement"]("li", {\n          __self: Comments_this,\n          __source: {\n            fileName: Comments_jsxFileName,\n            lineNumber: 144,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/react["createElement"](comment["a" /* default */], {\n          author: item.user.login,\n          avatar: Comments_avatar(item.user.avatar_url),\n          content: item.body,\n          datetime: item.created_at,\n          __self: Comments_this,\n          __source: {\n            fileName: Comments_jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }\n        }));\n      },\n      __self: Comments_this,\n      __source: {\n        fileName: Comments_jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return null;\n};\n\nvar Comments_Comments = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Comments, _React$PureComponent);\n\n  var _super = _createSuper(Comments);\n\n  function Comments(props) {\n    var _this2;\n\n    _classCallCheck(this, Comments);\n\n    _this2 = _super.call(this, props);\n    _this2.state = {\n      spinningListFetcher: true,\n      authentication: false\n    };\n\n    _this2.login = function () {\n      if (!_this2.token) {\n        var rediect = stringifyQuery({\n          client_id: _this2.props.client_id,\n          scope: \'public_repo\',\n          redirect_uri: window.location.href\n        }, \'https://github.com/login/oauth/authorize\');\n        window.location.href = rediect;\n      }\n    };\n\n    _this2.handleChange = function (e) {\n      _this2.setState({\n        value: e.target.value\n      });\n    };\n\n    _this2.createComments = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var _this2$state, issue, value, result;\n\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this2$state = _this2.state, issue = _this2$state.issue, value = _this2$state.value;\n\n              if (!(issue && value)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 4;\n              return api.post(issue.comments_url, {\n                body: value\n              }, {\n                headers: _objectSpread({\n                  Authorization: "token ".concat(_this2.token)\n                }, Comments_headers)\n              });\n\n            case 4:\n              result = _context.sent;\n\n              _this2.setState(function (state) {\n                return {\n                  comments: (state.comments || []).concat([result]),\n                  value: \'\'\n                };\n              });\n\n            case 6:\n            case "end":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this2.handleSubmit = function () {\n      var _this2$state2 = _this2.state,\n          value = _this2$state2.value,\n          issue = _this2$state2.issue;\n      if (!value) return;\n\n      if (issue) {\n        _this2.createComments();\n      } else {\n        _this2.issues().then(function (issue) {\n          _this2.setState({\n            issue: issue\n          }, _this2.createComments);\n        });\n      }\n    };\n\n    _this2.accessToken();\n\n    return _this2;\n  }\n\n  _createClass(Comments, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      this.getCommentsByIssue();\n    }\n  }, {\n    key: "componentWillReceiveProps",\n    value: function componentWillReceiveProps() {\n      this.accessToken();\n    }\n  }, {\n    key: "getUsers",\n    value: function () {\n      var _getUsers = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(token) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.t0 = this;\n                _context2.next = 4;\n                return Comments_user(token);\n\n              case 4:\n                _context2.t1 = _context2.sent;\n                _context2.t2 = {\n                  user: _context2.t1\n                };\n\n                _context2.t0.setState.call(_context2.t0, _context2.t2);\n\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t3 = _context2["catch"](0);\n                console.error(_context2.t3);\n\n              case 12:\n              case "end":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 9]]);\n      }));\n\n      function getUsers(_x14) {\n        return _getUsers.apply(this, arguments);\n      }\n\n      return getUsers;\n    }()\n  }, {\n    key: "accessToken",\n    value: function () {\n      var _accessToken = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this3 = this;\n\n        var result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n\n                if (!(this.props.code && !this.token)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                this.setState({\n                  authentication: true\n                });\n                _context3.next = 5;\n                return LoginWithCode({\n                  client_id: this.props.client_id,\n                  client_secret: this.props.client_secret,\n                  code: this.props.code\n                });\n\n              case 5:\n                result = _context3.sent;\n\n                if (result.access_token) {\n                  this.setState({\n                    token: result.access_token\n                  }, function () {\n                    _this3.token = result.access_token;\n\n                    _this3.getUsers(result.access_token);\n                  });\n                }\n\n                this.setState({\n                  authentication: false\n                });\n\n              case 8:\n                _context3.next = 14;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3["catch"](0);\n                this.setState({\n                  authentication: false\n                });\n                console.error(_context3.t0);\n\n              case 14:\n              case "end":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 10]]);\n      }));\n\n      function accessToken() {\n        return _accessToken.apply(this, arguments);\n      }\n\n      return accessToken;\n    }()\n  }, {\n    key: "issues",\n    value: function () {\n      var _issues = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _this$props, owner, repo, label, client_id, client_secret, filename, result;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$props = this.props, owner = _this$props.owner, repo = _this$props.repo, label = _this$props.label, client_id = _this$props.client_id, client_secret = _this$props.client_secret, filename = _this$props.filename;\n                _context4.next = 3;\n                return getIssues(owner, repo, {\n                  labels: this.label\n                }, {\n                  username: client_id,\n                  password: client_secret\n                });\n\n              case 3:\n                result = _context4.sent;\n\n                if (!result.length) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt("return", result[0]);\n\n              case 6:\n                _context4.next = 8;\n                return createIssues(owner, repo, {\n                  labels: [label || this.label],\n                  title: filename,\n                  body: "".concat(filename, "\\u7684\\u8BC4\\u8BBA")\n                }, {\n                  Authorization: "token ".concat(this.token)\n                });\n\n              case 8:\n                return _context4.abrupt("return", _context4.sent);\n\n              case 9:\n              case "end":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function issues() {\n        return _issues.apply(this, arguments);\n      }\n\n      return issues;\n    }()\n  }, {\n    key: "getCommentsByIssue",\n    value: function () {\n      var _getCommentsByIssue = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var _this$props2, client_id, client_secret, issue, comments;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$props2 = this.props, client_id = _this$props2.client_id, client_secret = _this$props2.client_secret;\n                _context5.prev = 1;\n                _context5.next = 4;\n                return this.issues();\n\n              case 4:\n                issue = _context5.sent;\n\n                if (!(issue && issue.comments_url)) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.next = 8;\n                return api.get(issue.comments_url, {\n                  headers: {\n                    Accept: \'application/vnd.github.v3.full+json\'\n                  },\n                  auth: {\n                    username: client_id,\n                    password: client_secret\n                  },\n                  params: {\n                    per_page: 10,\n                    page: 1\n                  }\n                });\n\n              case 8:\n                comments = _context5.sent;\n                this.setState({\n                  spinningListFetcher: false\n                });\n                if (comments) this.setState({\n                  comments: comments\n                });\n\n              case 11:\n                _context5.next = 16;\n                break;\n\n              case 13:\n                _context5.prev = 13;\n                _context5.t0 = _context5["catch"](1);\n                this.setState({\n                  spinningListFetcher: false\n                });\n\n              case 16:\n              case "end":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 13]]);\n      }));\n\n      function getCommentsByIssue() {\n        return _getCommentsByIssue.apply(this, arguments);\n      }\n\n      return getCommentsByIssue;\n    }()\n  }, {\n    key: "render",\n    value: function render() {\n      var _this$state = this.state,\n          comments = _this$state.comments,\n          spinningListFetcher = _this$state.spinningListFetcher,\n          authentication = _this$state.authentication;\n      return /*#__PURE__*/react["createElement"](spin["a" /* default */], {\n        tip: "Loading...",\n        spinning: spinningListFetcher,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 353,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/react["createElement"](Comments_CommentsList, {\n        comments: comments,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 354,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/react["createElement"](spin["a" /* default */], {\n        tip: "Loading...",\n        spinning: authentication,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 355,\n          columnNumber: 9\n        }\n      }, this.comments));\n    }\n  }, {\n    key: "label",\n    get: function get() {\n      return window.location.hash.split(\'/\').pop();\n    }\n  }, {\n    key: "token",\n    get: function get() {\n      return this.state.token || localStorage.getItem(\'access_token\');\n    },\n    set: function set(access_token) {\n      localStorage.setItem(\'access_token\', access_token);\n    }\n  }, {\n    key: "avatar",\n    get: function get() {\n      var _this$state$user = this.state.user,\n          user = _this$state$user === void 0 ? {} : _this$state$user;\n      return /*#__PURE__*/react["createElement"](es_avatar["a" /* default */], {\n        src: user.avatar_url,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 283,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: "tabBarExtraContent",\n    get: function get() {\n      return !this.token && /*#__PURE__*/react["createElement"]("div", {\n        style: {\n          padding: \'0px 10px\'\n        },\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 322,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/react["createElement"]("a", {\n        onClick: this.login,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 322,\n          columnNumber: 64\n        }\n      }, "Login"), " with GitHub");\n    }\n  }, {\n    key: "comments",\n    get: function get() {\n      var value = this.state.value;\n      var editor = /*#__PURE__*/react["createElement"]("div", {\n        className: "card-container",\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 328,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/react["createElement"](tabs["a" /* default */], {\n        type: "card",\n        tabBarExtraContent: this.tabBarExtraContent,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 329,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/react["createElement"](TabPane, {\n        tab: "\\u8BC4\\u8BBA",\n        key: "1",\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/react["createElement"](Comments_Editor, {\n        onChange: this.handleChange,\n        value: value,\n        disabled: !Boolean(this.token),\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 331,\n          columnNumber: 15\n        }\n      }))), this.commentButton);\n      return /*#__PURE__*/react["createElement"](comment["a" /* default */], {\n        avatar: this.avatar,\n        content: editor,\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 337,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: "commentButton",\n    get: function get() {\n      return /*#__PURE__*/react["createElement"](es_form["a" /* default */].Item, {\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 342,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/react["createElement"](es_button["a" /* default */], {\n        disabled: !Boolean(this.token),\n        htmlType: "submit",\n        onClick: this.handleSubmit,\n        type: "primary",\n        __self: this,\n        __source: {\n          fileName: Comments_jsxFileName,\n          lineNumber: 343,\n          columnNumber: 9\n        }\n      }, "Comment"));\n    }\n  }]);\n\n  return Comments;\n}(react["PureComponent"]);\n\n\n// CONCATENATED MODULE: ./components/List.tsx\nvar List_jsxFileName = "D:\\\\Workspace\\\\note-site\\\\components\\\\List.tsx",\n    _this2 = undefined;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction List_slicedToArray(arr, i) { return List_arrayWithHoles(arr) || List_iterableToArrayLimit(arr, i) || List_unsupportedIterableToArray(arr, i) || List_nonIterableRest(); }\n\nfunction List_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\n\nfunction List_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return List_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(n); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return List_arrayLikeToArray(o, minLen); }\n\nfunction List_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction List_iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction List_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n\n\nfunction getClient() {\n  var host = window.location.host;\n  var options = {\n    owner: \'ybonest\',\n    repo: \'note-site\'\n  };\n\n  if (host === \'localhost:8080\') {\n    Object.assign(options, {\n      client_id: \'f67c609c5ee466c83cd2\',\n      client_secret: \'e956d15ba2761abad52e534424f52ba07ffbdbad\',\n      redirect_uri: \'http://localhost:8080/\'\n    });\n  }\n\n  if (host === \'me.ybonote.cn\') {\n    Object.assign(options, {\n      client_id: \'5962d91e68425e69e653\',\n      client_secret: \'3231ff558fe41ba150fb868effdc099b7ac8d864\',\n      redirect_uri: \'https://me.ybonote.cn/\'\n    });\n  }\n\n  return options;\n}\n\nfunction parserQuery() {\n  var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n  return search.slice(1).split(\'&\').reduce(function (collect, item) {\n    var _item$split = item.split(\'=\'),\n        _item$split2 = List_slicedToArray(_item$split, 2),\n        key = _item$split2[0],\n        value = _item$split2[1];\n\n    collect[key] = value;\n    return collect;\n  }, {});\n}\n\nfunction List_markdown(markdown) {\n  var _this = this;\n\n  return function () {\n    return /*#__PURE__*/react["createElement"]("div", {\n      dangerouslySetInnerHTML: {\n        __html: markdown\n      },\n      __self: _this,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 40,\n        columnNumber: 12\n      }\n    });\n  };\n}\n\n;\n/* harmony default export */ var List = __webpack_exports__["default"] = (Object(context["b" /* markedSource */])(function (props) {\n  var sources = props.flatList;\n  var options = getClient();\n  var history = Object(react_router["g" /* useHistory */])();\n  var code;\n  react["useEffect"](function () {\n    var _window$location = window.location,\n        origin = _window$location.origin,\n        search = _window$location.search,\n        hash = _window$location.hash;\n    code = parserQuery(search).code;\n\n    if (code) {\n      sessionStorage.setItem(\'code\', code);\n      window.location.href = "".concat(origin, "/").concat(hash);\n    }\n  });\n\n  if (!code) {\n    code = sessionStorage.getItem(\'code\');\n  }\n\n  return /*#__PURE__*/react["createElement"](react["Fragment"], {\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/react["createElement"](react_router["d" /* Switch */], {\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/react["createElement"](react_router["b" /* Route */], {\n    exact: true,\n    path: "/",\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/react["createElement"](styled["i" /* TagListPanel */], {\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/react["createElement"](Introduction["a" /* IntroductionList */], {\n    dataSource: sources,\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/react["createElement"](react_router["d" /* Switch */], {\n    __self: _this2,\n    __source: {\n      fileName: List_jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, sources.map(function (source) {\n    return /*#__PURE__*/react["createElement"](react_router["b" /* Route */], {\n      key: source.namehash,\n      exact: true,\n      path: \'/\' + source.namehash,\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/react["createElement"](styled["b" /* Content */], {\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/react["createElement"](Tree, {\n      tag: source.tag,\n      selectKey: history.location.pathname,\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/react["createElement"](styled["c" /* Details */], {\n      key: "details",\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, react["createElement"](List_markdown(source.content), {\n      key: source.namehash\n    }), /*#__PURE__*/react["createElement"](Comments_Comments, _extends({}, options, {\n      filename: source.name,\n      history: history,\n      code: code,\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 76,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/react["createElement"](Tags["a" /* TagsCard */], {\n      __self: _this2,\n      __source: {\n        fileName: List_jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }));\n  })));\n}));\n\n//# sourceURL=webpack:///./components/List.tsx_+_2_modules?')}}]);